<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Claude AI Chatbot with API</title>
    <style>
        /* (Previous CSS remains the same) */
    </style>
</head>
<body>
    <div id="chat-container">
        <div id="chat-messages"></div>
        <div class="typing-indicator">Claude is typing...</div>
        <div id="input-area">
            <input type="text" id="message-input" placeholder="Type your message...">
            <button id="send-button">Send</button>
        </div>
    </div>
    <script>
        // API Configuration
        const API_KEY = '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'; // Replace with your actual API key
        const API_URL = 'https://api.anthropic.com/v1/messages';

        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-button');
        const chatMessages = document.getElementById('chat-messages');
        const typingIndicator = document.querySelector('.typing-indicator');

        // Initial AI message
        addMessage('Hello! I\'m Claude, an AI assistant. How can I help you today?', 'ai');

        sendButton.addEventListener('click', sendMessage);
        messageInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') sendMessage();
        });

        async function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;

            // Add user message
            addMessage(message, 'user');
            messageInput.value = '';
            messageInput.disabled = true;
            sendButton.disabled = true;

            // Show typing indicator
            typingIndicator.style.display = 'block';

            try {
                // Actual API call to Claude
                const response = await fetchClaudeResponse(message);
                
                // Hide typing indicator
                typingIndicator.style.display = 'none';
                
                // Add AI response
                addMessage(response, 'ai');
            } catch (error) {
                console.error('Error:', error);
                addMessage('Sorry, I encountered an error. Please try again.', 'ai');
            } finally {
                messageInput.disabled = false;
                sendButton.disabled = false;
                messageInput.focus();
            }
        }

        async function fetchClaudeResponse(userMessage) {
            const response = await fetch(API_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-API-Key': API_KEY,
                    'Anthropic-Version': '2023-06-01'
                },
                body: JSON.stringify({
                    model: 'claude-3-haiku-20240307', // You can change this to other Claude models
                    max_tokens: 300,
                    messages: [
                        {
                            role: "user",
                            content: userMessage
                        }
                    ]
                })
            });

            if (!response.ok) {
                throw new Error('API request failed');
            }

            const data = await response.json();
            return data.content[0].text; // Extract the text response
        }

        function addMessage(text, sender) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message', `${sender}-message`);
            messageElement.textContent = text;
            chatMessages.appendChild(messageElement);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
    </script>
</body>
</html>
